<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ù…Ù†ØµØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220; --fg:#eef2ff; --muted:#94a3b8; --card:#111a2e; --brand:#0ea37a; --brand-2:#22d3ee; --brand-3:#8b5cf6;
  --shadow:0 8px 30px rgba(0,0,0,.4);
}
*{box-sizing:border-box}
body{margin:0;font-family:'Cairo',system-ui,Segoe UI,Arial; background:var(--bg); color:var(--fg);}
a{color:inherit}
.container{max-width:1100px;margin:auto;padding:16px;}
.nav{position:sticky;top:0;z-index:30;background:rgba(0,0,0,.5);backdrop-filter:blur(10px);border-bottom:1px solid #1f2937}
.nav .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.logo{display:flex;gap:8px;align-items:center;font-weight:700}
.badge{font-size:.78rem;border:1px solid #334155;border-radius:999px;padding:.2rem .6rem;color:#cbd5e1}
.tab{padding:.55rem .9rem;border-radius:999px;border:1px solid #334155;cursor:pointer;user-select:none}
.tab.active{background:linear-gradient(135deg,var(--brand),#22c55e); border-color:transparent; color:white; box-shadow:var(--shadow)}
select,button,input{font-family:inherit}
.btn{background:linear-gradient(135deg,var(--brand),#22c55e); border:0; color:white; padding:.7rem 1rem; border-radius:12px; cursor:pointer; box-shadow:var(--shadow)}
.btn.sm{padding:.4rem .7rem;border-radius:10px}
.field{background:#0b1324;border:1px solid #334155;color:var(--fg);padding:.6rem .7rem;border-radius:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}
.card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:14px;box-shadow:var(--shadow)}
.heading{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.muted{color:var(--muted);font-size:.92rem}
main section{display:none}
main section.active{display:block;animation:fade .35s ease}
@keyframes fade{from{opacity:.2;transform:translateY(6px)}to{opacity:1;transform:none}}

.hero{position:relative;border-radius:16px;overflow:hidden;min-height:180px;background:linear-gradient(180deg,rgba(14,163,122,.3), transparent), url('https://images.unsplash.com/photo-1549880338-65ddcdfd017b?q=80&w=1600&auto=format&fit=crop') center/cover}
.hero .overlay{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.2),rgba(0,0,0,.7));}
.hero .inner{position:relative;padding:28px}
.kpi{display:flex;gap:12px;align-items:center}
.kpi .num{font-size:1.6rem;font-weight:700}

.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.pill{display:flex;align-items:center;gap:8px;background:#0b1324;border:1px solid #334155;padding:.4rem .6rem;border-radius:999px}
.bad-surface{background:#0b1324;border:1px dashed #334155;border-radius:16px;padding:14px;text-align:center}

.footer{opacity:.8;font-size:.9rem;margin:28px 0;text-align:center}
.toast{position:fixed;bottom:18px;right:18px;background:#111827;color:#fff;padding:.7rem 1rem;border-radius:10px;box-shadow:var(--shadow);opacity:0;transform:translateY(10px);transition:.25s;z-index:50}
.toast.on{opacity:1;transform:none}
.mini{position:fixed;left:12px;bottom:12px;z-index:40;background:rgba(0,0,0,.5);backdrop-filter:blur(10px);border:1px solid #1f2937;border-radius:12px;padding:10px;display:none;gap:10px;align-items:center}
.mini.on{display:flex}
.mini audio{width:200px}
.theme{display:flex;gap:6px}
.swatch{width:26px;height:26px;border-radius:999px;border:2px solid #1f2937;cursor:pointer}
.swatch.green{background:#0ea37a}.swatch.cyan{background:#22d3ee}.swatch.violet{background:#8b5cf6}
.ayah:hover{background:rgba(148,163,184,.15)}
</style>
</head>
<body>
  <div class="nav">
    <div class="container">
      <div class="row">
        <div class="logo">ğŸ•‹ Ù…Ù†ØµØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ© <span class="badge">Ù†Ø³Ø®Ø© Ø£ÙˆÙ„ÙŠØ©</span></div>
        <div class="row" id="tabs">
          <div class="tab active" data-to="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
          <div class="tab" data-to="prayer">Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</div>
          <div class="tab" data-to="live">Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
          <div class="tab" data-to="mushaf">Ø§Ù„Ù…ØµØ­Ù</div>
          <div class="tab" data-to="azkar">Ø§Ù„Ø£Ø°ÙƒØ§Ø±</div>
          <div class="tab" data-to="fav">Ø§Ù„Ù…ÙØ¶Ù„Ø©</div>
          <div class="tab" data-to="search">Ø§Ù„Ø¨Ø­Ø«</div>
        </div>
        <div style="margin-inline-start:auto" class="theme">
          <span class="swatch green" data-theme="green" title="Ø£Ø®Ø¶Ø±"></span>
          <span class="swatch cyan" data-theme="cyan" title="Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ"></span>
          <span class="swatch violet" data-theme="violet" title="Ø¨Ù†ÙØ³Ø¬ÙŠ"></span>
        </div>
      </div>
    </div>
  </div>

  <main class="container">
    <section id="home" class="active">
      <div class="hero">
        <div class="overlay"></div>
        <div class="inner">
          <h1>Ø¨ÙˆØ§Ø¨Ø© Ù…ÙˆØ­Ø¯Ø©: Ø§Ù„Ù‚Ø±Ø¢Ù† â€¢ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª â€¢ Ø§Ù„Ø¨Ø« â€¢ Ø§Ù„Ø£Ø°ÙƒØ§Ø±</h1>
          <p class="muted" id="dateTime"></p>
<script>
function updateDateTime(){
  const now = new Date();
  const opts = {weekday:'long', year:'numeric', month:'long', day:'numeric'};
  const miladi = now.toLocaleDateString('ar-EG', opts);
  const time12 = now.toLocaleTimeString('ar-EG', {hour:'numeric', minute:'2-digit', second:'2-digit', hour12:true});
  const hijri = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', opts).format(now);
  document.getElementById('dateTime').textContent = `ğŸ“… ${hijri} â€¢ ${miladi} â€” ğŸ•’ ${time12}`;
}
setInterval(updateDateTime,1000);
updateDateTime();
</script>
          <div class="row" style="margin-top:8px">
            <button class="btn" onclick="gotoSection('prayer')">Ø§Ø°Ù‡Ø¨ Ù„Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</button>
            <button class="btn" onclick="gotoSection('mushaf')">Ø§ÙØªØ­ Ø§Ù„Ù…ØµØ­Ù</button>
          </div>
        </div>
      </div>
      <div class="grid" style="margin-top:14px">
        <div class="card">
          <div class="heading"><b>Ø¢ÙŠØ© Ø§Ù„ÙŠÙˆÙ…</b><span class="badge">Ù‚Ø±Ø¢Ù† ÙƒØ±ÙŠÙ…</span></div>
          <p id="ayahOfDay" style="font-size:1.15rem;line-height:2"></p>
        </div>
        <div class="card">
          <div class="heading"><b>Ø°ÙÙƒØ± Ø§Ù„ÙŠÙˆÙ…</b><span class="badge">ØªØ´ØºÙŠÙ„ ØµÙˆØªÙŠ</span></div>
          <p id="zekrOfDay" style="line-height:2"></p>
          <div class="row"><button class="btn sm" onclick="speak(document.getElementById('zekrOfDay').textContent)">ØªØ´ØºÙŠÙ„</button></div>
        </div>
      </div>
    </section>

    <section id="prayer">
      <div class="heading"><b>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</b><span class="badge" id="locBadge">â€”</span></div>
      <div class="grid">
        <div class="card">
          <div class="row">
            <input class="field" id="cityInput" placeholder="Ø­Ø¯Ø¯ Ù…Ø¯ÙŠÙ†Ø© Ø£Ùˆ ÙØ¹Ù‘Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹"/>
            <button class="btn sm" id="useGeo">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</button>
          </div>
          <div id="timesWrap" class="grid" style="grid-template-columns:repeat(auto-fit,minmax(140px,1fr));margin-top:10px"></div>
          <div class="bad-surface"><b>Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ:</b> <span id="nextName">â€”</span> â€¢ <span id="countdown">--:--:--</span></div>
        </div>
        <div class="card">
          <div class="heading"><b>ğŸ”” Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</b><span class="badge">Ù‚Ø¨Ù„ 15Ø¯ â€¢ Ø¨Ø¹Ø¯ 20Ø¯</span></div>
          <div class="row">
            <label class="pill"><input type="checkbox" id="remindersToggle"> ØªÙØ¹ÙŠÙ„</label>
            <label class="pill">Ù‚Ø¨Ù„ Ø§Ù„ØµÙ„Ø§Ø© <input class="field" id="preMinutes" type="number" min="1" max="120" value="15" style="width:80px"></label>
            <label class="pill">Ø¨Ø¹Ø¯ Ø§Ù„ØµÙ„Ø§Ø© <input class="field" id="postMinutes" type="number" min="1" max="120" value="20" style="width:80px"></label>
            <button class="btn sm" id="saveReminders">Ø­ÙØ¸</button>
          </div>
          <p class="muted">Ø³ÙŠØ¸Ù‡Ø± Ø¥Ø´Ø¹Ø§Ø± Ø£Ù†ÙŠÙ‚ ÙŠØ°ÙƒØ±Ùƒ Ø¨Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ÙˆØ¨Ø£Ø°ÙƒØ§Ø± Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØµÙ„Ø§Ø© â€” ÙŠØ¯Ø¹Ù… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ğŸŒ™</p>
        </div>
      </div>
    </section>

    <section id="live">
      <div class="heading"><b>Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</b><span class="badge">ØµÙˆØª ÙÙ‚Ø· â€¢ Ù…Ø´ØºÙ‘Ù„ Ø¹Ø§Ø¦Ù…</span></div>
      <div class="card">
        <div class="row">
          <select class="field" id="radioSel"></select>
          <input id="customUrl" class="field" placeholder="Ø£Ùˆ Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø¥Ø°Ø§Ø¹Ø© Ù…Ø¨Ø§Ø´Ø± HTTPS" style="flex:1">
          <button class="btn sm" id="playRadio">ØªØ´ØºÙŠÙ„</button>
        </div>
        <audio id="radio" controls style="width:100%;margin-top:8px"></audio>
        <p class="muted">Ù…ØµØ§Ø¯Ø± Ø¬Ø§Ù‡Ø²Ø©: Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ù…Ù† Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©ØŒ Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒ Ù…Ø­Ø·Ø§Øª Qurango Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©.</p>
      </div>
    </section>

    <section id="mushaf">
      <div class="heading"><b>Ø§Ù„Ù…ØµØ­Ù</b><span class="badge">Ù†Øµ Ø¹Ø«Ù…Ø§Ù†ÙŠ + ØªÙ„Ø§ÙˆØ§Øª ÙƒØ§Ù…Ù„Ø©</span></div>
      <div class="card">
        <div class="row">
          <select class="field" id="surahSel"></select>
          <select class="field" id="reciterSel"></select>
          <button class="btn sm" id="playSurah">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© ÙƒØ§Ù…Ù„Ø©</button>
        </div>
<div class="row" style="margin-top:8px">
  <label class="pill"><input type="checkbox" id="byAyah"> ØªØ´ØºÙŠÙ„ Ø¢ÙŠØ©-Ø¨Ø¢ÙŠØ©</label>
  <select id="tafsirSel" class="field">
    <option value="">Ø¨Ø¯ÙˆÙ† ØªÙØ³ÙŠØ±</option>
    <option value="ar.jalalayn">Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠÙ†</option>
    <option value="ar.ibnkatheer">Ø§Ø¨Ù† ÙƒØ«ÙŠØ±</option>
  </select>
</div>

        <div id="qText" style="line-height:2;margin-top:8px"></div>
<div id="tafsirBox" class="card" style="margin-top:10px;display:none">
  <div class="heading"><b>ğŸ“š Ø§Ù„ØªÙØ³ÙŠØ±</b></div>
  <div id="tafsirContent" class="muted" style="line-height:2"></div>
</div>
<audio id="qAudio"  controls style="width:100%;margin-top:8px"></audio>
      </div>
    </section>

    <section id="azkar">
      <div class="heading"><b>Ø§Ù„Ø£Ø°ÙƒØ§Ø±</b><span class="badge">Ø¨Ø·Ø§Ù‚Ø§Øª Ù…Ø¹ Ø¹Ø¯Ø§Ø¯ ØªÙƒØ±Ø§Ø±</span></div>
      <div class="row" style="margin-bottom:8px">
        <select id="azCat" class="field">
          <option value="morning">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</option>
          <option value="evening">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</option>
          <option value="afterSalah">Ø£Ø°ÙƒØ§Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØµÙ„Ø§Ø©</option>
          <option value="ruqyah">Ø§Ù„Ø±Ù‘ÙÙ‚ÙŠØ© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©</option>
          <option value="sleep">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù†ÙˆÙ…</option>
          <option value="wudu">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ÙˆØ¶ÙˆØ¡</option>
        </select>
        <button class="btn sm" onclick="startAuto()">ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø±</button>
      </div>
      <div id="azList" class="grid"></div>
    </section>

    <section id="fav">
      <div class="heading"><b>Ø§Ù„Ù…ÙØ¶Ù„Ø©</b></div>
      <div id="favList" class="grid"></div>
    </section>

    <section id="search">
      <div class="heading"><b>Ø§Ù„Ø¨Ø­Ø«</b></div>
      <div class="row">
        <input id="q" class="field" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¢ÙŠØ© â€¢ Ø°ÙƒØ± â€¢ Ù…Ø­Ø·Ø© Ø±Ø§Ø¯ÙŠÙˆ">
        <button class="btn sm" onclick="doSearch()">Ø¨Ø­Ø«</button>
      </div>
      <div id="results" class="grid" style="margin-top:10px"></div>
    </section>

    <div class="footer muted">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù…Ø¤Ø³Ø³Ø© Ø°ÙŠØ¨</div>
  </main>

  <div class="mini" id="mini">
    <button class="btn sm" onclick="gotoSection('live')">ğŸ§ Ø§Ù„Ø¨Ø«</button>
    <audio id="miniAudio" controls></audio>
  </div>

  <div class="toast" id="toast"></div>

<script>
/* ======== THEME ======== */
function applyTheme(t){
  if(t==='cyan'){ document.documentElement.style.setProperty('--brand','#22d3ee'); }
  else if(t==='violet'){ document.documentElement.style.setProperty('--brand','#8b5cf6'); }
  else{ document.documentElement.style.setProperty('--brand','#0ea37a'); }
  localStorage.setItem('theme', t);
}
document.querySelectorAll('.swatch').forEach(s=>s.onclick=()=>applyTheme(s.dataset.theme));
applyTheme(localStorage.getItem('theme')||'green');

/* ======== ROUTER ======== */
document.querySelectorAll('.nav .tab').forEach(t=>t.onclick=()=>gotoSection(t.getAttribute('data-to')));
function gotoSection(id){
  document.querySelectorAll('main section').forEach(s=>s.classList.remove('active'));
  const el=document.getElementById(id); if(el) el.classList.add('active');
  document.querySelectorAll('.nav .tab').forEach(t=>t.classList.toggle('active', t.getAttribute('data-to')===id));
  window.scrollTo({top:0,behavior:'smooth'});
}
window.addEventListener('hashchange', ()=>{
  const h=(location.hash||'').replace('#',''); if(h) gotoSection(h);
});
if(location.hash){ gotoSection(location.hash.replace('#','')); }

/* ======== HOME (Ayah/Thikr of day) ======== */
(async function(){
  try{
    // Simple ayah: use Al-Quran Cloud random ayah
    const r = await fetch('https://api.alquran.cloud/v1/ayah/random/uthmani');
    const j = await r.json(); document.getElementById('ayahOfDay').textContent = j.data.text;
  }catch(e){ document.getElementById('ayahOfDay').textContent='â€”'; }
  const thikrBank=[
    "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡ÙØŒ Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù",
    "Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„Ù‘ÙØ§ Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„ÙØ§ Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡ÙØŒ Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ",
    "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡",
    "Ø­ÙØ³Ù’Ø¨ÙÙŠÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„Ù‘ÙØ§ Ù‡ÙÙˆÙ Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù ØªÙÙˆÙÙƒÙ‘ÙÙ„Ù’ØªÙ ÙˆÙÙ‡ÙÙˆÙ Ø±ÙØ¨Ù‘Ù Ø§Ù„Ø¹ÙØ±Ù’Ø´Ù Ø§Ù„Ø¹ÙØ¸ÙÙŠÙ…Ù"
  ];
  document.getElementById('zekrOfDay').textContent = thikrBank[Math.floor(Math.random()*thikrBank.length)];
})();
function speak(text){
  try{ const u = new SpeechSynthesisUtterance(text); u.lang='ar'; speechSynthesis.speak(u);}catch(e){ toast('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØµÙˆØªÙŠØ©'); }
}

/* ======== PRAYER TIMES ======== */
const locBadge=document.getElementById('locBadge');
document.getElementById('useGeo').onclick=()=>navigator.geolocation.getCurrentPosition(async pos=>{
  const {latitude,longitude}=pos.coords; locBadge.textContent=`${latitude.toFixed(3)}, ${longitude.toFixed(3)}`;
  loadTimings(latitude, longitude);
},()=>alert('Ù„Ù… Ø£Ø³ØªØ·Ø¹ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ùƒ'));
async function loadTimings(lat,lon,city=null){
  try{
    const url = city ? `https://api.aladhan.com/v1/timingsByCity?city=${encodeURIComponent(city)}&country=&method=5`
                     : `https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=5`;
    const r = await fetch(url); const j = await r.json();
    const t = j.data.timings;
    renderTimes({Fajr:t.Fajr,Dhuhr:t.Dhuhr,Asr:t.Asr,Maghrib:t.Maghrib,Isha:t.Isha});
  }catch(e){ toast('ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª'); }
}
document.getElementById('cityInput').addEventListener('keydown',e=>{ if(e.key==='Enter'){ loadTimings(null,null, e.target.value.trim()); }});

function renderTimes(tims){
  window._lastPrayerTimings = tims;
  const wrap=document.getElementById('timesWrap'); wrap.innerHTML='';
  Object.entries(tims).forEach(([k,v])=>{
    const div=document.createElement('div'); div.className='card';
    div.innerHTML=`<b>${k}</b><div class="muted" style="font-size:1.2rem">${v}</div>`;
    wrap.appendChild(div);
  });
  updateCountdown(tims);
  setTimeout(()=>{ if(window.schedulePrayerReminders) window.schedulePrayerReminders(tims); },0);
}
// simple countdown
let cdTimer=null;
function updateCountdown(tims){
  if(cdTimer) clearInterval(cdTimer);
  const order=[['Fajr','Ø§Ù„ÙØ¬Ø±'],['Dhuhr','Ø§Ù„Ø¸Ù‡Ø±'],['Asr','Ø§Ù„Ø¹ØµØ±'],['Maghrib','Ø§Ù„Ù…ØºØ±Ø¨'],['Isha','Ø§Ù„Ø¹Ø´Ø§Ø¡']];
  cdTimer=setInterval(()=>{
    const now=new Date();
    let next=null;
    for(const [k,ar] of order){
      const d=new Date(); const [h,m]=tims[k].split(':').map(Number); d.setHours(h,m,0,0);
      if(d>now){ next={key:k,ar,time:d}; break; }
    }
    if(!next){ // tomorrow Fajr
      const d=new Date(); const [h,m]=tims['Fajr'].split(':').map(Number); d.setDate(d.getDate()+1); d.setHours(h,m,0,0);
      next={key:'Fajr',ar:'Ø§Ù„ÙØ¬Ø±',time:d};
    }
    document.getElementById('nextName').textContent = next.ar;
    const diff=next.time - now;
    const hh=String(Math.floor(diff/3600000)).padStart(2,'0');
    const mm=String(Math.floor((diff%3600000)/60000)).padStart(2,'0');
    const ss=String(Math.floor((diff%60000)/1000)).padStart(2,'0');
    document.getElementById('countdown').textContent=`${hh}:${mm}:${ss}`;
  },1000);
}
// load by IP as fallback (simple)
loadTimings(null,null,'Cairo');

/* ======== REMINDERS (before/after) ======== */
let __reminderTimers=[];
async function ensureNotifyPermission(){
  if(!("Notification" in window)) return 'denied';
  if(Notification.permission==='granted') return 'granted';
  try{ return await Notification.requestPermission(); }catch(e){ return Notification.permission; }
}
async function showNotif(title, body, data){
  try{
    const reg = await navigator.serviceWorker.getRegistration();
    if(reg){
      await reg.showNotification(title, { body, lang:'ar', dir:'rtl',
        icon:'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 64 64%22><path fill=%22%230ea37a%22 d=%22M32 6l10 10h8v34H14V16h8z%22/><path fill=%22%23fff%22 d=%22M22 28h20v18H22z%22/></svg>',
        badge:'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22><circle cx=%2212%22 cy=%2212%22 r=%2210%22 fill=%22%230ea37a%22/></svg>',
        vibrate:[120,60,120], tag: data?.tag||'prayer', data
      });
      return;
    }
  }catch(e){}
  if('Notification' in window && Notification.permission==='granted'){
    new Notification(title,{body, lang:'ar', dir:'rtl'});
  }else{
    toast(title + ' â€” ' + body);
  }
}
function clearReminderTimers(){ __reminderTimers.forEach(id=>clearTimeout(id)); __reminderTimers=[]; }
function hhmmToDate(hhmm){ const [h,m]=hhmm.split(':').map(Number); const d=new Date(); d.setHours(h,m,0,0); return d; }
window.schedulePrayerReminders=function(tims){
  clearReminderTimers();
  const enabled = localStorage.getItem('remindersEnabled')==='true';
  if(!enabled) return;
  const preM = Math.max(1,Math.min(120,parseInt(localStorage.getItem('remindPre')||'15',10)));
  const postM= Math.max(1,Math.min(120,parseInt(localStorage.getItem('remindPost')||'20',10)));
  const map=[['Fajr','Ø§Ù„ÙØ¬Ø±'],['Dhuhr','Ø§Ù„Ø¸Ù‡Ø±'],['Asr','Ø§Ù„Ø¹ØµØ±'],['Maghrib','Ø§Ù„Ù…ØºØ±Ø¨'],['Isha','Ø§Ù„Ø¹Ø´Ø§Ø¡']];
  const now=Date.now();
  map.forEach(([k,ar])=>{
    const base=hhmmToDate(tims[k]); if(base.getTime()<=now) base.setDate(base.getDate()+1);
    const pre=new Date(base.getTime()-preM*60000);
    const post=new Date(base.getTime()+postM*60000);
    const preDelay=pre.getTime()-Date.now(); const postDelay=post.getTime()-Date.now();
    if(preDelay>0){ __reminderTimers.push(setTimeout(()=>showNotif(`Ø§Ù‚ØªØ±Ø¨ Ù…ÙˆØ¹Ø¯ ØµÙ„Ø§Ø© ${ar}`,'Ù„Ø§ ØªÙ†Ø³Ù Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ù„ØµÙ„Ø§Ø©.',{section:'prayer',prayer:ar,kind:'before',tag:'before-'+k}), preDelay)); }
    if(postDelay>0){ __reminderTimers.push(setTimeout(()=>showNotif(`Ø£Ø°ÙƒØ§Ø± Ù…Ø§ Ø¨Ø¹Ø¯ ØµÙ„Ø§Ø© ${ar}`,'Ø§Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ØŒ Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ØŒ Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ØŒ Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±.',{section:'azkar',prayer:ar,kind:'after',tag:'after-'+k}), postDelay)); }
  });
};
(function(){ // UI bind
  const tgl=document.getElementById('remindersToggle');
  const pre=document.getElementById('preMinutes');
  const post=document.getElementById('postMinutes');
  const save=document.getElementById('saveReminders');
  tgl.checked = localStorage.getItem('remindersEnabled')==='true';
  pre.value = parseInt(localStorage.getItem('remindPre')||'15',10);
  post.value = parseInt(localStorage.getItem('remindPost')||'20',10);
  save.onclick=async()=>{
    localStorage.setItem('remindersEnabled', tgl.checked?'true':'false');
    localStorage.setItem('remindPre', String(Math.max(1,Math.min(120,parseInt(pre.value||'15',10)))));
    localStorage.setItem('remindPost',String(Math.max(1,Math.min(120,parseInt(post.value||'20',10)))));
    const p=await ensureNotifyPermission(); if(p!=='granted' && tgl.checked) alert('Ù„Ù… ÙŠØªÙ… Ù…Ù†Ø­ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
    if(window._lastPrayerTimings) window.schedulePrayerReminders(window._lastPrayerTimings);
    toast('ØªÙ… Ø­ÙØ¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª');
  };
})();
if(navigator.serviceWorker){
  navigator.serviceWorker.addEventListener('message', e=>{ const j=e.data||{}; if(j.jump) gotoSection(j.jump); });
}

/* ======== LIVE RADIO ======== */
const stations=[
  {name:'Ø¨Ø« Ø§Ù„Ø­Ø±Ù… Ø§Ù„Ù…ÙƒÙŠ (ØµÙˆØª ÙÙ‚Ø·)', url:'https://qurango.net/radio/makkah'},
  {name:'Ø¨Ø« Ø§Ù„Ø­Ø±Ù… Ø§Ù„Ù†Ø¨ÙˆÙŠ (ØµÙˆØª ÙÙ‚Ø·)', url:'https://qurango.net/radio/madina'},
  {name:'Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… (Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©)', url:'https://stream.radiojar.com/8s5u5tpdtwzuv'},
  {name:'Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (Ù…ÙƒØ©)', url:'https://stream.radiojar.com/0tpy1h0kxtzuv'},
  {name:'Qurango: Mix Radio', url:'https://qurango.net/radio/mix'},
  {name:'Qurango: Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­', url:'https://qurango.net/radio/athkar_sabah'},
  {name:'Qurango: Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡', url:'https://qurango.net/radio/athkar_masa'}
];
const radioSel=document.getElementById('radioSel');
stations.forEach(s=>{ const o=document.createElement('option'); o.value=s.url; o.textContent=s.name; radioSel.appendChild(o); });

// Default to Haram (Makkah) audio-only stream
const DEFAULT_HARAM = 'https://qurango.net/radio/makkah';
try{
  radioSel.value = DEFAULT_HARAM;
}catch(_){}
const radioEl = document.getElementById('radio');
radioEl.src = radioSel.value || DEFAULT_HARAM;
// Prepare mini-player
document.getElementById('miniAudio').src = radioEl.src;
document.getElementById('mini').classList.add('on');
// Attempt to start playback; browsers may block until a user gesture
radioEl.load();
radioEl.play().catch(()=>{});
// One-time resume on first user interaction (helps iOS/Chrome policies)
const __onceStart = ()=>{
  radioEl.play().catch(()=>{});
  document.getElementById('miniAudio').play().catch(()=>{});
  document.removeEventListener('click', __onceStart, true);
  document.removeEventListener('touchstart', __onceStart, true);
};
document.addEventListener('click', __onceStart, true);
document.addEventListener('touchstart', __onceStart, true);

document.getElementById('playRadio').onclick=()=>{
  const u=document.getElementById('customUrl').value.trim() || radioSel.value;
  const a=document.getElementById('radio'); a.src=u; a.play().catch(()=>toast('ØªØ¹Ø°Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ â€” Ø¬Ø±Ù‘Ø¨ Ø±Ø§Ø¨Ø·Ù‹Ø§ Ø¢Ø®Ø±'));
  // mini
  document.getElementById('miniAudio').src=u;
  document.getElementById('mini').classList.add('on');
};

/* ======== MUSHAF (text + full surah audio) ======== */



const reciters = [
  {label:'Ø¹Ø¨Ø¯ Ø§Ù„Ø¨Ø§Ø³Ø· (Ù…Ø±ØªÙ„)', code:'ar.abdulbasitmurattal'},
  {label:'Ø§Ù„Ø­ØµØ±ÙŠ (Ù…Ø±ØªÙ„)', code:'ar.husary'},
  {label:'Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ (Ù…Ø±ØªÙ„)', code:'ar.minshawi'},
  {label:'Ø§Ù„Ø³Ø¯ÙŠØ³', code:'ar.abdurrahmaansudais'},
  {label:'Ø§Ù„Ø´Ø±ÙŠÙ…', code:'ar.saoodshuraym'},
  {label:'Ø³Ø¹Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ', code:'ar.saadghamdi'},
  {label:'ÙØ§Ø±Ø³ Ø¹Ø¨Ø§Ø¯', code:'ar.faresabbad'},
  {label:'Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ', code:'ar.mahermuaiqly'},
  {label:'Ù…Ø´Ø§Ø±ÙŠ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ', code:'ar.alafasy'}
];



const recSel=document.getElementById('reciterSel');

/* -------- Robust audio resolver -------- */
const HARDCODED_MAP = {
  'ar.husary': ['ar.husary','ar.husarymurattal','ar.husary_64kbps'],
  'ar.minshawi': ['ar.minshawi','ar.minshawi-mujawwad','ar.minshawi_mujawwad'],
  'ar.abdurrahmaansudais': ['ar.abdurrahmaansudais','ar.sudais'],
  'ar.saoodshuraym': ['ar.saoodshuraym','ar.shuraym'],
  'ar.saoodghamdi': ['ar.saoodghamdi','ar.ghamdi'],
  'ar.mahermuaiqly': ['ar.mahermuaiqly','ar.maher-almuaiqly'],
  'ar.abdulbasitmurattal': ['ar.abdulbasitmurattal','ar.abdulbasit'],
  'ar.alafasy': ['ar.alafasy']
};

function unique(arr){ return Array.from(new Set(arr)); }

async function tryPlayUrl(audioEl, url){
  return new Promise((resolve)=>{
    let done=false;
    const onCanPlay = ()=>{ if(!done){ done=true; cleanup(); audioEl.src=url; audioEl.play().then(()=>resolve(true)).catch(()=>resolve(false)); } };
    const onError = ()=>{ if(!done){ done=true; cleanup(); resolve(false);} };
    function cleanup(){ audioEl.removeEventListener('canplay', onCanPlay); audioEl.removeEventListener('error', onError); }
    // Create a temp audio to probe URL to avoid flashing current player
    const probe = new Audio();
    probe.addEventListener('canplay', onCanPlay);
    probe.addEventListener('error', onError);
    probe.src = url;
    // Some browsers need load() to start probing
    try{ probe.load(); }catch(e){}
    // Fallback timeout
    setTimeout(()=>{ if(!done){ done=true; cleanup(); resolve(false);} }, 4000);
  });
}

async function discoverEditionsLike(primary){
  // try to expand candidate codes using editions API (best-effort)
  try{
    const r = await fetch('https://api.alquran.cloud/v1/edition?format=audio');
    const j = await r.json();
    if(!j || !j.data) return [];
    const key = primary.replace('ar.','').replace(/[^a-z]/g,'');
    const names = ['husary','minshawi','sudais','shuraym','ghamdi','maher','muaiqly','abdulbasit','alafasy','fares','abbad'];
    const pool = j.data.filter(e => e.language==='ar');
    return pool
      .filter(e => (e.identifier && (e.identifier.includes(key) || names.some(n=>e.identifier.includes(n)))))
      .map(e => e.identifier);
  }catch(e){ return []; }
}

async function buildCandidates(primary){
  const hard = HARDCODED_MAP[primary] || [primary];
  const discovered = await discoverEditionsLike(primary);
  return unique([...hard, ...discovered]);
}

async function playFullSurahResolved(edition, surah){
  const audioEl = document.getElementById('qAudio');
  const candidates = await buildCandidates(edition);
  for(const ed of candidates){
    const url = `https://cdn.islamic.network/quran/audio-surah/128/${ed}/${surah}.mp3`;
    if(await tryPlayUrl(audioEl, url)) return true;
  }
  // Ultimate fallback
  const fallback = `https://cdn.islamic.network/quran/audio-surah/128/ar.alafasy/${surah}.mp3`;
  if(await tryPlayUrl(audioEl, fallback)){
    toast('ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ© Ø¨Ù‚Ø§Ø±Ø¦ Ø¨Ø¯ÙŠÙ„ (Ø§Ù„Ø¹ÙØ§Ø³ÙŠ) Ù„Ø¹Ø¯Ù… ØªÙˆÙØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù…Ø®ØªØ§Ø±');
    return true;
  }
  toast('ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø£ÙŠ ØªÙ„Ø§ÙˆØ© Ù„Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø§Ù„Ø¢Ù†');
  return false;
}

// For per-ayah
async function getAyahAudioUrlResolved(edition, globalAyahNumber){
  const candidates = await buildCandidates(edition);
  for(const ed of candidates){
    const u = `https://cdn.islamic.network/quran/audio/ayah/128/${ed}/${globalAyahNumber}.mp3`;
    // quick probe by constructing Audio
    const ok = await tryPlayUrl(new Audio(), u);
    if(ok) return u;
  }
  const fallback = `https://cdn.islamic.network/quran/audio/ayah/128/ar.alafasy/${globalAyahNumber}.mp3`;
  const ok = await tryPlayUrl(new Audio(), fallback);
  return ok ? fallback : null;
}



// Per-ayah playback (uses global ayah numbers from API response)
let __byAyah = false;
let __ayahList = []; // [{num:number, el:HTMLElement}]
let __ayahIdx = 0;
let __ayahAudio = new Audio();
let __ayahEdition = 'ar.alafasy';

function setAyahHighlight(idx){
  __ayahList.forEach((o,i)=>{
    if(i===idx){ o.el.style.background = 'rgba(34,197,94,.18)'; o.el.scrollIntoView({block:'center', behavior:'smooth'}); }
    else{ o.el.style.background = 'transparent'; }
  });
}

async function getAyahAudioUrl(edition, globalAyahNumber){ return await getAyahAudioUrlResolved(edition, globalAyahNumber); }

async function playAyahAt(idx){
  if(idx<0 || idx>=__ayahList.length) return;
  __ayahIdx = idx;
  setAyahHighlight(__ayahIdx);
  const n = __ayahList[__ayahIdx].num;
  const url = await getAyahAudioUrl(__ayahEdition, n);
  if(!url){ toast('ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ù…Ù„Ù Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ØµÙˆØªÙŠ'); return; }
  __ayahAudio.src = url;
  try{ await __ayahAudio.play(); }catch(e){ toast('Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ù…ØªØµÙØ­ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª'); }
  // Fetch tafsir if enabled
  updateTafsirForAyah(n).catch(()=>{});
}

function stopByAyah(){ try{ __ayahAudio.pause(); }catch(e){} }

function nextAyah(){ if(__ayahIdx+1<__ayahList.length) playAyahAt(__ayahIdx+1); }

__ayahAudio.addEventListener('ended', ()=>{
  if(__byAyah) nextAyah();
});

async function updateTafsirForAyah(globalAyahNumber){
  const sel = document.getElementById('tafsirSel');
  const box = document.getElementById('tafsirBox');
  const content = document.getElementById('tafsirContent');
  if(!sel || !box || !content) return;
  if(!sel.value){ box.style.display='none'; return; }
  box.style.display='block';
  content.textContent = 'â€¦ Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ± â€¦';
  try{
    const r = await fetch(`https://api.alquran.cloud/v1/ayah/${globalAyahNumber}/${sel.value}`);
    const j = await r.json();
    if(j && j.data && j.data.text){
      content.textContent = j.data.text;
    }else{
      content.innerHTML = '<span class="muted">ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ± Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¢ÙŠØ©.</span>';
    }
  }catch(e){
    content.innerHTML = '<span class="muted">ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ± Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¢ÙŠØ©.</span>';
  }
}

reciters.forEach(r=>{ const o=document.createElement('option'); o.value=r.code; o.textContent=r.label; recSel.appendChild(o); });
const surSel=document.getElementById('surahSel');
(async function(){
  const sur = await fetch('https://api.alquran.cloud/v1/surah').then(r=>r.json()).catch(()=>null);
  if(sur && sur.data){
    sur.data.forEach(s=>{ const o=document.createElement('option'); o.value=s.number; o.textContent = s.number + ' - ' + s.name; surSel.appendChild(o); });
  }else{
    for(let i=1;i<=114;i++){ const o=document.createElement('option'); o.value=i; o.textContent='Ø³ÙˆØ±Ø© #' + i; surSel.appendChild(o); }
  }
})();


async function playSurahAsAyahChain(edition, surahNumber){
  try{
    const t = await fetch(`https://api.alquran.cloud/v1/surah/${surahNumber}/ar.uthmani`).then(r=>r.json());
    const ayahs = (t && t.data && t.data.ayahs) ? t.data.ayahs : [];
    const container = document.getElementById('qText');
    container.innerHTML = ayahs.map((a,i)=>`<span class="ayah" data-num="${a.number}" data-idx="${i}" style="padding:.15rem .25rem;display:inline-block;cursor:pointer">${a.text} <span class="muted">ï´¿${a.numberInSurah}ï´¾</span></span>`).join(' ');
    __ayahList = Array.from(container.querySelectorAll('.ayah')).map(el=>({num: parseInt(el.getAttribute('data-num'),10), el}));
    __byAyah = true;
    __ayahEdition = edition;
    if(__ayahList.length>0){
      await playAyahAt(0);
      // Pause full-surah audio if anything
      try{ document.getElementById('qAudio').pause(); }catch(e){}
      toast('ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© Ø¢ÙŠØ©-Ø¨Ø¢ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ø¹Ø¯Ù… ØªÙˆÙØ± Ù…Ù„Ù Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù…Ø®ØªØ§Ø±');
      return true;
    }
  }catch(e){}
  return false;
}

document.getElementById('playSurah').onclick=async()=>{
  const s=surSel.value, ed=recSel.value;
  __byAyah = !!document.getElementById('byAyah').checked;
  __ayahEdition = ed;

  try{
    const t = await fetch(`https://api.alquran.cloud/v1/surah/${s}/ar.uthmani`).then(r=>r.json());
    const ayahs = t.data.ayahs || [];
    // Render ayahs as individual spans with data-number
    const container = document.getElementById('qText');
    container.innerHTML = ayahs.map((a,i)=>`<span class="ayah" data-num="${a.number}" data-idx="${i}" style="padding:.15rem .25rem;display:inline-block;cursor:pointer">${a.text} <span class="muted">ï´¿${a.numberInSurah}ï´¾</span></span>`).join(' ');
    __ayahList = Array.from(container.querySelectorAll('.ayah')).map(el=>({num: parseInt(el.getAttribute('data-num'),10), el}));
    container.querySelectorAll('.ayah').forEach(el=>{
      el.addEventListener('click', ()=>{
        const idx = parseInt(el.getAttribute('data-idx'),10);
        if(__byAyah){
          stopByAyah();
          playAyahAt(idx);
        }else{
          // jump tafsir for clicked ayah even if not by-ayah
          updateTafsirForAyah(parseInt(el.getAttribute('data-num'),10));
        }
      });
    });
  }catch(e){
    document.getElementById('qText').textContent='ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù†Øµ';
  }

  if(__byAyah){
    // start verse-by-verse
    const firstIdx = 0;
    if(__ayahList.length>0) await playAyahAt(firstIdx);
    // also pause any full-surah audio
    try{ document.getElementById('qAudio').pause(); }catch(e){}
  }else{
    // full surah playback with robust fallback
    if(!(await playFullSurahResolved(ed, s))){ await playSurahAsAyahChain(ed, s); }
  }
};


/* ======== AZKAR (dataset from Ø­ØµÙ† Ø§Ù„Ù…Ø³Ù„Ù… + Ø§Ù„Ø±Ù‚ÙŠØ© + Ø§Ù„Ù†ÙˆÙ… + Ø§Ù„ÙˆØ¶ÙˆØ¡) ======== */
const AZKAR = {
  morning: [
    {text:"Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ§Ù„Ù„Ù‡Ù Ù…ÙÙ†Ù Ø§Ù„Ø´Ù‘ÙÙŠÙ’Ø·ÙØ§Ù†Ù Ø§Ù„Ø±Ù‘ÙØ¬ÙÙŠÙ…Ù â€¢ Ø§Ù„Ù„Ù‘Ù‡Ù Ù„Ø§Ù Ø¥ÙÙ„ÙÙ€Ù‡Ù Ø¥ÙÙ„Ø§Ù‘Ù Ù‡ÙÙˆÙ Ø§Ù„Ù’Ø­ÙÙŠÙ‘Ù Ø§Ù„Ù’Ù‚ÙÙŠÙ‘ÙÙˆÙ…Ù ... ÙˆÙÙ‡ÙÙˆÙ Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ‘Ù Ø§Ù„Ù’Ø¹ÙØ¸ÙÙŠÙ…Ù (Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ).", repeat:1, virtue:"Ù…Ù† Ù‚Ø§Ù„Ù‡Ø§ Ø­ÙŠÙ† ÙŠØµØ¨Ø­ Ø£ÙØ¬ÙŠØ± Ù…Ù† Ø§Ù„Ø¬Ù† Ø­ØªÙ‰ ÙŠÙ…Ø³ÙŠ."},
    {text:"Ù‚ÙÙ„Ù’ Ù‡ÙÙˆÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø£ÙØ­ÙØ¯ÙŒ", repeat:3},
    {text:"Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨Ù‘Ù Ø§Ù„Ù’ÙÙÙ„ÙÙ‚Ù", repeat:3},
    {text:"Ù‚ÙÙ„Ù’ Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙØ±ÙØ¨Ù‘Ù Ø§Ù„Ù†Ù‘ÙØ§Ø³Ù", repeat:3},
    {text:"Ø£ÙØµÙ’Ø¨ÙØ­Ù’Ù†ÙØ§ ÙˆÙØ£ÙØµÙ’Ø¨ÙØ­Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„Ù‘ÙÙ‡Ù ... ÙˆÙØ¹ÙØ°ÙØ§Ø¨Ù ÙÙÙŠ Ø§Ù„Ù‚ÙØ¨Ù’Ø±Ù.", repeat:1},
    {text:"Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±: Ø§Ù„Ù„Ù‘Ù‡Ù€Ù…Ù‘ Ø£Ù†Øª Ø±Ø¨ÙŠ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª ... Ø§ØºÙØ± Ù„ÙŠ ÙØ¥Ù†Ù‡ Ù„Ø§ ÙŠØºÙØ± Ø§Ù„Ø°Ù†ÙˆØ¨ Ø¥Ù„Ø§ Ø£Ù†Øª.", repeat:1},
    {text:"Ø±ÙØ¶ÙÙŠØªÙ Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ù‘Ù‹Ø§ ÙˆØ¨Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø¯ÙŠÙ†Ù‹Ø§ ÙˆØ¨Ù…Ø­Ù…Ø¯ ï·º Ù†Ø¨ÙŠÙ‘Ù‹Ø§.", repeat:3},
    {text:"Ø§Ù„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ù…Ø§ Ø£ÙØµÙ’Ø¨ÙØ­Ù Ø¨ÙŠ Ù…Ù† Ù†Ø¹Ù…Ø©Ù ... ÙÙ„Ùƒ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ„Ùƒ Ø§Ù„Ø´ÙƒØ±.", repeat:1},
    {text:"Ø­ÙØ³Ù’Ø¨ÙÙŠÙ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù„Ø§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„Ø§ Ù‡ÙÙˆÙ Ø¹ÙÙ„ÙÙŠÙ’Ù‡Ù ØªÙÙˆÙÙƒÙ‘ÙÙ„Ù’ØªÙ ÙˆÙÙ‡ÙÙˆÙ Ø±ÙØ¨ÙÙ‘ Ø§Ù„Ø¹ÙØ±Ù’Ø´Ù Ø§Ù„Ø¹ÙØ¸ÙÙŠÙ…Ù.", repeat:7},
    {text:"Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ¶Ø±Ù‘ Ù…Ø¹ Ø§Ø³Ù…Ù‡ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ø£Ø±Ø¶ ÙˆÙ„Ø§ ÙÙŠ Ø§Ù„Ø³Ù…Ø§Ø¡ ÙˆÙ‡Ùˆ Ø§Ù„Ø³Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù„ÙŠÙ….", repeat:3},
    {text:"Ø³ÙØ¨Ù’Ø­Ø§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù Ø¹Ø¯Ø¯Ù Ø®Ù„Ù‚ÙÙ‡ ÙˆØ±Ø¶Ø§ Ù†ÙØ³ÙÙ‡ ÙˆØ²ÙÙ†Ø©Ù Ø¹Ø±Ø´ÙÙ‡ ÙˆÙ…ÙØ¯Ø§Ø¯Ù ÙƒÙ„Ù…Ø§ØªÙÙ‡.", repeat:3},
    {text:"Ø§Ù„Ù„Ù‘Ù‡Ù…Ù‘ Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø¨Ø¯Ù†ÙŠØŒ Ø§Ù„Ù„Ù‘Ù‡Ù…Ù‘ Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø³Ù…Ø¹ÙŠØŒ Ø§Ù„Ù„Ù‘Ù‡Ù…Ù‘ Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø¨ØµØ±ÙŠØŒ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª.", repeat:3},
    {text:"Ø§Ù„Ù„Ù‘Ù‡Ù…Ù‘ Ø¥Ù†Ù‘ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¹ÙÙˆÙ ÙˆØ§Ù„Ø¹Ø§ÙÙŠØ©Ù ÙÙŠ Ø§Ù„Ø¯Ù†ÙŠØ§ ÙˆØ§Ù„Ø¢Ø®Ø±Ø© ...", repeat:1},
    {text:"ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… Ø¨Ø±Ø­Ù…ØªÙƒ Ø£Ø³ØªØºÙŠØ« Ø£ØµÙ„Ø­ Ù„ÙŠ Ø´Ø£Ù†ÙŠ ÙƒÙ„Ù‘Ù‡ ÙˆÙ„Ø§ ØªÙƒÙ„Ù†ÙŠ Ø¥Ù„Ù‰ Ù†ÙØ³ÙŠ Ø·Ø±ÙØ© Ø¹ÙŠÙ†.", repeat:3},
    {text:"Ø§Ù„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ø¹ÙØ§Ù„ÙÙ…Ù Ø§Ù„ØºÙŠØ¨ ÙˆØ§Ù„Ø´Ù‘Ù‡Ø§Ø¯Ø© ... Ø£Ø¹ÙˆØ° Ø¨Ùƒ Ù…Ù† Ø´Ø±Ù‘ Ù†ÙØ³ÙŠ ÙˆÙ…Ù† Ø´Ø±Ù‘ Ø§Ù„Ø´ÙŠØ·Ø§Ù† ÙˆØ´ÙØ±Ù’ÙƒÙÙ‡Ù.", repeat:1},
    {text:"Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ï·º", repeat:10},
    {text:"Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ ...", repeat:100},
    {text:"Ø³ÙØ¨Ù’Ø­Ø§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù.", repeat:100},
    {text:"Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡.", repeat:100}
  ],
  evening: [
    {text:"Ø§Ù„Ù…Ø¹ÙˆØ°Ø§Øª (Ø§Ù„Ø¥Ø®Ù„Ø§ØµØŒ Ø§Ù„ÙÙ„Ù‚ØŒ Ø§Ù„Ù†Ø§Ø³) ÙƒÙ„ Ø³ÙˆØ±Ø© 3 Ù…Ø±Ø§Øª.", repeat:3},
    {text:"Ø®ÙˆØ§ØªÙŠÙ… Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© (Ø¢Ù…ÙÙ†Ù Ø§Ù„Ø±Ù‘ÙØ³ÙˆÙ„ ...)", repeat:1},
    {text:"Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ.", repeat:1},
    {text:"Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ£ÙÙ…Ù’Ø³ÙÙ‰ Ø§Ù„Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„Ù‘ÙÙ‡Ù ...", repeat:1},
    {text:"Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø± ...", repeat:1},
    {text:"Ø±ÙØ¶ÙÙŠØªÙ Ø¨Ø§Ù„Ù„Ù‡ Ø±Ø¨Ù‘Ù‹Ø§ ...", repeat:3},
    {text:"Ø§Ù„Ù„Ù‘Ù‡ÙÙ…Ù‘Ù Ù…Ø§ Ø£Ù…Ø³Ù‰ Ø¨ÙŠ Ù…Ù† Ù†Ø¹Ù…Ø© ...", repeat:1},
    {text:"Ø­ÙØ³Ù’Ø¨ÙÙŠÙ Ø§Ù„Ù„Ù‘Ù‡ ...", repeat:7},
    {text:"Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠØ¶Ø±Ù‘ ...", repeat:3},
    {text:"Ø³ÙØ¨Ù’Ø­Ø§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù Ø¹Ø¯Ø¯Ù Ø®Ù„Ù‚ÙÙ‡ ...", repeat:3},
    {text:"Ø§Ù„Ù„Ù‘Ù‡Ù…Ù‘ Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø¨Ø¯Ù†ÙŠ ...", repeat:3},
    {text:"Ø§Ù„Ù„Ù‘Ù‡Ù…Ù‘ Ø¥Ù†Ù‘ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¹ÙÙˆ ÙˆØ§Ù„Ø¹Ø§ÙÙŠØ© ...", repeat:1},
    {text:"ÙŠØ§ Ø­ÙŠ ÙŠØ§ Ù‚ÙŠÙˆÙ… ...", repeat:3},
    {text:"Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ï·º", repeat:10},
    {text:"Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ ...", repeat:100},
    {text:"Ø³ÙØ¨Ù’Ø­Ø§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù.", repeat:100},
    {text:"Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙ‡.", repeat:100}
  ],
  afterSalah: [
    {text:"Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ (3) â€¢ Ø§Ù„Ù„Ù‡Ù… Ø£Ù†Øª Ø§Ù„Ø³Ù„Ø§Ù… ÙˆÙ…Ù†Ùƒ Ø§Ù„Ø³Ù„Ø§Ù… ØªØ¨Ø§Ø±ÙƒØª ÙŠØ§ Ø°Ø§ Ø§Ù„Ø¬Ù„Ø§Ù„ ÙˆØ§Ù„Ø¥ÙƒØ±Ø§Ù….", repeat:1},
    {text:"Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ØŒ Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ ÙˆÙ„Ù‡ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ‡Ùˆ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø¯ÙŠØ± ...", repeat:1},
    {text:"Ø§Ù„ØªØ³Ø¨ÙŠØ­: Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ (33) â€¢ Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ (33) â€¢ Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø± (33) Ø«Ù… ØªÙ…Ø§Ù… Ø§Ù„Ù…Ø§Ø¦Ø©: Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ...", repeat:1},
    {text:"Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ â€¢ Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙˆØ§Ù„Ù…Ø¹ÙˆØ°ØªØ§Ù† (Ù…Ø±Ø© ÙˆØ¨Ø¹Ø¯ Ø§Ù„ÙØ¬Ø± ÙˆØ§Ù„Ù…ØºØ±Ø¨ Ø«Ù„Ø§Ø«Ù‹Ø§).", repeat:1}
  ],
  ruqyah: [
    {text:"Ø§Ù„ÙØ§ØªØ­Ø© â€¢ Ø£ÙˆÙ„ Ø§Ù„Ø¨Ù‚Ø±Ø© (1-4) â€¢ Ø¢ÙŠØ§Øª: 20ØŒ 60ØŒ 69 Ù…Ù† Ø§Ù„Ø¨Ù‚Ø±Ø© â€¢ Ø¢ÙŠØ© Ø§Ù„Ø³Ø­Ø± (102) â€¢ Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ â€¢ Ø¢Ø®Ø± Ø§Ù„Ø¨Ù‚Ø±Ø© (285-286) â€¢ Ø§Ù„Ù†Ø³Ø§Ø¡ 32 Ùˆ54 â€¢ Ø§Ù„Ø£Ù†Ø¹Ø§Ù… 103 â€¢ Ø§Ù„ØªÙˆØ¨Ø© 55 â€¢ ÙŠÙˆØ³Ù 67 â€¢ Ù‡ÙˆØ¯ 37 â€¢ Ø§Ù„Ø­Ø¬Ø± 16-18 â€¢ Ø·Ù‡ 131 â€¢ Ø§Ù„Ù‚ØµØµ 79 â€¢ Ø§Ù„ÙƒÙ‡Ù 39 â€¢ Ø§Ù„ØµØ§ÙØ§Øª 88-90 â€¢ Ø§Ù„ÙØªØ­ 15 â€¢ Ø§Ù„Ù…Ù„Ùƒ 1-4 â€¢ Ø§Ù„Ù‚Ù„Ù… 1-5 Ùˆ 51 â€¢ Ø§Ù„Ø·ÙˆØ± 48 â€¢ Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ† 4 â€¢ Ø§Ù„Ø¥Ù†Ø³Ø§Ù† 6 â€¢ Ø§Ù„ØªÙˆØ¨Ø© 14-15 â€¢ ÙŠÙˆÙ†Ø³ 57 â€¢ Ø§Ù„Ù†Ø­Ù„ 68-69 â€¢ Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡ 82 â€¢ Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡ 80 â€¢ ÙØµÙ„Øª 44 â€¢ Ø§Ù„Ø¥Ø®Ù„Ø§Øµ â€¢ Ø§Ù„ÙÙ„Ù‚ â€¢ Ø§Ù„Ù†Ø§Ø³.", repeat:1},
    {text:"Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø¥ÙÙ†Ù‘ÙÙŠ Ø¹ÙØ¨Ù’Ø¯ÙÙƒÙ Ø§Ø¨Ù†Ù Ø¹Ø¨Ø¯ÙÙƒÙ Ø§Ø¨Ù†Ù Ø£ÙÙ…ÙØªÙÙƒÙ ... Ø£ÙÙ†Ù’ ØªÙØ¬Ù’Ø¹ÙÙ„Ù Ø§Ù„Ù‚ÙØ±Ù’Ø¢Ù†Ù Ø±ÙØ¨ÙÙŠØ¹Ù Ù‚ÙÙ„Ù’Ø¨ÙÙŠ ...", repeat:1},
    {text:"ØªØ­ØµÙ‘ÙÙ†ØªÙ Ø¨Ø§Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ù‡Ùˆ ... Ø­Ø³Ø¨ÙŠ Ø§Ù„Ù„Ù‡ ÙˆÙ†Ø¹Ù… Ø§Ù„ÙˆÙƒÙŠÙ„ ...", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ø±Ø­Ù…ØªÙƒ Ù†Ø±Ø¬Ùˆ ÙÙ„Ø§ ØªÙƒÙ„Ù†ÙŠ Ø¥Ù„Ù‰ Ù†ÙØ³ÙŠ Ø·Ø±ÙØ© Ø¹ÙŠÙ† ...", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ø§ØµØ±Ù Ø¹Ù†ÙŠ Ø­Ø±Ù‘Ù Ø§Ù„Ø¹ÙŠÙ† ÙˆØ¨Ø±Ø¯Ù‡Ø§ ÙˆÙˆØµØ¨Ù‡Ø§.", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ø±Ø¨ Ø§Ù„Ù†Ø§Ø³ Ø£Ø°Ù‡Ø¨ Ø§Ù„Ø¨Ø£Ø³ ÙˆØ§Ø´ÙÙ Ø£Ù†Øª Ø§Ù„Ø´Ø§ÙÙŠ ...", repeat:1},
    {text:"Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø£Ø±Ù‚ÙŠ Ù†ÙØ³ÙŠ Ù…Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¤Ø°ÙŠÙ†ÙŠ ...", repeat:1}
  ],
  sleep: [
    {text:"Ø¬Ù…Ø¹ Ø§Ù„ÙƒÙÙŠÙ† ÙˆØ§Ù„Ù†ÙØ« ÙÙŠÙ‡Ù…Ø§ ÙˆÙ‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙˆØ§Ù„ÙÙ„Ù‚ ÙˆØ§Ù„Ù†Ø§Ø³ Ø«Ù„Ø§Ø«Ù‹Ø§ Ø«Ù… Ù…Ø³Ø­ Ø§Ù„Ø¬Ø³Ø¯.", repeat:3},
    {text:"Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ.", repeat:1},
    {text:"Ø®ÙˆØ§ØªÙŠÙ… Ø§Ù„Ø¨Ù‚Ø±Ø© (Ø¢Ù…Ù† Ø§Ù„Ø±Ø³ÙˆÙ„ ...).", repeat:1},
    {text:"Ø¨Ø§Ø³Ù…Ùƒ Ø±Ø¨ÙŠ ÙˆØ¶Ø¹ØªÙ Ø¬Ù†Ø¨ÙŠ ...", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†Ùƒ Ø®Ù„Ù‚Øª Ù†ÙØ³ÙŠ ... Ø£Ø³Ø£Ù„Ùƒ Ø§Ù„Ø¹Ø§ÙÙŠØ©.", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ù‚Ù†ÙŠ Ø¹Ø°Ø§Ø¨Ùƒ ÙŠÙˆÙ… ØªØ¨Ø¹Ø« Ø¹Ø¨Ø§Ø¯Ùƒ.", repeat:1},
    {text:"Ø¨Ø§Ø³Ù…Ùƒ Ø§Ù„Ù„Ù‡Ù… Ø£Ù…ÙˆØª ÙˆØ£Ø­ÙŠØ§.", repeat:1},
    {text:"ØªØ³Ø¨ÙŠØ­: 33 â€¢ ØªØ­Ù…ÙŠØ¯: 33 â€¢ ØªÙƒØ¨ÙŠØ±: 34.", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ø±Ø¨ Ø§Ù„Ø³Ù…ÙˆØ§Øª Ø§Ù„Ø³Ø¨Ø¹ ÙˆØ±Ø¨ Ø§Ù„Ø£Ø±Ø¶ ... Ø§Ù‚Ø¶Ù Ø¹Ù†Ø§ Ø§Ù„Ø¯ÙŠÙ† ÙˆØ£ØºÙ†Ù†Ø§ Ù…Ù† Ø§Ù„ÙÙ‚Ø±.", repeat:1},
    {text:"Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ Ø§Ù„Ø°ÙŠ Ø£Ø·Ø¹Ù…Ù†Ø§ ÙˆØ³Ù‚Ø§Ù†Ø§ ÙˆÙƒÙØ§Ù†Ø§ ÙˆØ¢ÙˆØ§Ù†Ø§ ...", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ø¹Ø§Ù„Ù… Ø§Ù„ØºÙŠØ¨ ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø© ...", repeat:1},
    {text:"Ù‚Ø±Ø§Ø¡Ø© (Ø§Ù„Ù… ØªÙ†Ø²ÙŠÙ„) Ø§Ù„Ø³Ø¬Ø¯Ø© Ùˆ(ØªØ¨Ø§Ø±Ùƒ Ø§Ù„Ø°ÙŠ Ø¨ÙŠØ¯Ù‡ Ø§Ù„Ù…Ù„Ùƒ).", repeat:1},
    {text:"Ø§Ù„Ù„Ù‡Ù… Ø£Ø³Ù„Ù…Øª Ù†ÙØ³ÙŠ Ø¥Ù„ÙŠÙƒ ... Ø¢Ù…Ù†Øª Ø¨ÙƒØªØ§Ø¨Ùƒ Ø§Ù„Ø°ÙŠ Ø£Ù†Ø²Ù„Øª ÙˆÙ†Ø¨ÙŠÙƒ Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„Øª.", repeat:1}
  ],
  wudu: [
    {text:"Ù‚Ø¨Ù„ Ø§Ù„ÙˆØ¶ÙˆØ¡: Ø§Ù„ØªØ³Ù…ÙŠØ© (Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‡).", repeat:1},
    {text:"Ø¨Ø¹Ø¯ Ø§Ù„ÙˆØ¶ÙˆØ¡: Ø£Ø´Ù‡Ø¯ Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ ÙˆØ£Ø´Ù‡Ø¯ Ø£Ù† Ù…Ø­Ù…Ø¯Ù‹Ø§ Ø¹Ø¨Ø¯Ù‡ ÙˆØ±Ø³ÙˆÙ„Ù‡ØŒ Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø§Ù„ØªÙˆØ§Ø¨ÙŠÙ† ÙˆØ§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø§Ù„Ù…ØªØ·Ù‡Ø±ÙŠÙ†.", repeat:1},
    {text:"(Ø³ÙØ¨Ø­Ø§Ù†Ùƒ Ø§Ù„Ù„Ù‡Ù… ÙˆØ¨Ø­Ù…Ø¯ÙƒØŒ Ø£Ø´Ù‡Ø¯ Ø£Ù† Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†ØªØŒ Ø£Ø³ØªØºÙØ±Ùƒ ÙˆØ£ØªÙˆØ¨ Ø¥Ù„ÙŠÙƒ).", repeat:1}
  ]
};
const azList=document.getElementById('azList'); const azCat=document.getElementById('azCat');
function renderAzkar(cat){
  azList.innerHTML='';
  (AZKAR[cat]||[]).forEach((z,idx)=>{
    const d=document.createElement('div'); d.className='card';
    d.innerHTML = `<div class="heading"><b>#${idx+1}</b><button class="btn sm" data-fav="1">â­</button></div>
      <p style="line-height:2">${z.text}</p>
      <div class="row"><span class="pill">Ø§Ù„ØªÙƒØ±Ø§Ø±: <b>${z.repeat||1}</b></span>
        <button class="btn sm" data-play="1">ØªØ´ØºÙŠÙ„</button>
        <button class="btn sm" data-share="1">Ù…Ø´Ø§Ø±ÙƒØ©</button>
      </div>`;
    d.querySelector('[data-play]').onclick=()=>speak(z.text);
    d.querySelector('[data-share]').onclick=()=>{
      const t = z.text; if(navigator.share){ navigator.share({text:t}).catch(()=>{}); }
      else{ navigator.clipboard.writeText(t); toast('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø°ÙƒØ±'); }
    };
    d.querySelector('[data-fav]').onclick=()=>saveFav({type:'zekr', cat, idx, text:z.text});
    azList.appendChild(d);
  });
}
azCat.onchange=()=>renderAzkar(azCat.value);
renderAzkar('morning');

/* ======== FAV ======== */
function saveFav(item){
  const arr=JSON.parse(localStorage.getItem('fav')||'[]'); arr.push(item); localStorage.setItem('fav', JSON.stringify(arr));
  toast('Ø£ÙØ¶ÙŠÙ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©');
  renderFav();
}
function renderFav(){
  const area=document.getElementById('favList'); area.innerHTML='';
  const arr=JSON.parse(localStorage.getItem('fav')||'[]');
  arr.forEach((it,i)=>{
    const d=document.createElement('div'); d.className='card'; d.innerHTML=`<div class="heading"><b>${it.type==='zekr'?'Ø°ÙƒØ±':'Ø¹Ù†ØµØ±'}</b><button class="btn sm" data-del="${i}">Ø­Ø°Ù</button></div><p>${it.text||it.title||''}</p>`;
    d.querySelector('[data-del]').onclick=()=>{ const x=JSON.parse(localStorage.getItem('fav')||'[]'); x.splice(i,1); localStorage.setItem('fav',JSON.stringify(x)); renderFav(); };
    area.appendChild(d);
  });
}
renderFav();

/* ======== SEARCH ======== */
function doSearch(){
  const q=document.getElementById('q').value.trim(); const res=document.getElementById('results'); res.innerHTML='';
  if(!q) return;
  const add=(title, text)=>{ const d=document.createElement('div'); d.className='card'; d.innerHTML=`<div class="heading"><b>${title}</b></div><p>${text}</p>`; res.appendChild(d); };
  // azkar
  Object.entries(AZKAR).forEach(([k,arr])=>arr.forEach(z=>{ if(z.text.includes(q)) add('Ø°ÙƒØ± Ù…Ù† '+k, z.text);}));
  // stations
  stations.forEach(s=>{ if(s.name.includes(q)) add('Ù…Ø­Ø·Ø© Ø¥Ø°Ø§Ø¹ÙŠØ©', s.name+' â€” '+s.url); });
}

/* ======== TOAST ======== */
function toast(t){ const el=document.getElementById('toast'); el.textContent=t; el.classList.add('on'); setTimeout(()=>el.classList.remove('on'), 2400);}

/* ======== SW (offline) ======== */
if('serviceWorker' in navigator){
  const code = `
    const CACHE='onefile-v5';
    self.addEventListener('install',e=>{ e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./']))); self.skipWaiting(); });
    self.addEventListener('activate',e=>{ e.waitUntil(caches.keys().then(keys=>Promise.all(keys.filter(k=>k!==CACHE).map(k=>caches.delete(k))))); self.clients.claim(); });
    self.addEventListener('fetch',e=>{
      e.respondWith(caches.match(e.request).then(r=> r || fetch(e.request).then(res=>{
        if(e.request.mode!=='navigate') return res;
        const copy=res.clone(); caches.open(CACHE).then(c=>c.put(e.request, copy)); return res;
      }).catch(()=>caches.match('./'))));
    });
    self.addEventListener('notificationclick', (event)=>{
      event.notification.close();
      const dest = (event.notification.data && event.notification.data.section) || 'prayer';
      event.waitUntil(self.clients.matchAll({type:'window', includeUncontrolled:true}).then(list=>{
        for(const client of list){ client.postMessage && client.postMessage({jump: dest}); if('focus' in client) return client.focus(); }
        if(self.clients.openWindow) return self.clients.openWindow('./#'+dest);
      }));
    });
  `;
  const blob = new Blob([code], {type:'text/javascript'});
  const url = URL.createObjectURL(blob);
  navigator.serviceWorker.register(url);
}
</script>
</body>
</html>
